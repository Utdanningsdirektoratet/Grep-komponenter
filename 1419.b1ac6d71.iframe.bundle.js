"use strict";(self.webpackChunkgrep_components=self.webpackChunkgrep_components||[]).push([[1419],{"./src/components/GrepEditor/components/buttons/InlineButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_Grep_komponenter_Grep_komponenter_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_home_runner_work_Grep_komponenter_Grep_komponenter_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_mui_material_ToggleButton__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/@mui/material/esm/ToggleButton/ToggleButton.js")),_styles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/GrepEditor/styles/index.ts"),lexical__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lexical/Lexical.prod.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["type","editor","children","selected"],LexicalButton=function LexicalButton(_ref){var type=_ref.type,editor=_ref.editor,children=_ref.children,selected=_ref.selected,props=(0,_home_runner_work_Grep_komponenter_Grep_komponenter_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__.A)(_ref,_excluded),classes=(0,_styles__WEBPACK_IMPORTED_MODULE_1__.K)().classes;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_mui_material_ToggleButton__WEBPACK_IMPORTED_MODULE_4__.A,(0,_home_runner_work_Grep_komponenter_Grep_komponenter_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.A)((0,_home_runner_work_Grep_komponenter_Grep_komponenter_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.A)({classes:{root:classes.btn,selected:classes.btnSelected},value:type,selected,size:"small",onClick:function onClick(){editor.dispatchCommand(lexical__WEBPACK_IMPORTED_MODULE_6__.mB,type)},"aria-label":"format text as ".concat(type.toLowerCase)},props),{},{children}))};const __WEBPACK_DEFAULT_EXPORT__=LexicalButton;LexicalButton.__docgenInfo={description:"",methods:[],displayName:"LexicalButton",props:{editor:{required:!0,tsType:{name:"LexicalEditor"},description:""},type:{required:!0,tsType:{name:"ButtonType"},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""}},composes:["Omit"]}},"./src/components/GrepEditor/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>components_GrepEditor});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectDestructuringEmpty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js"),react=__webpack_require__("./node_modules/react/index.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),LexicalComposer_prod=__webpack_require__("./node_modules/@lexical/react/LexicalComposer.prod.mjs"),LexicalRichTextPlugin_prod=__webpack_require__("./node_modules/@lexical/react/LexicalRichTextPlugin.prod.mjs"),LexicalContentEditable_prod=__webpack_require__("./node_modules/@lexical/react/LexicalContentEditable.prod.mjs"),LexicalHistoryPlugin_prod=__webpack_require__("./node_modules/@lexical/react/LexicalHistoryPlugin.prod.mjs"),LexicalErrorBoundary_prod=__webpack_require__("./node_modules/@lexical/react/LexicalErrorBoundary.prod.mjs"),LexicalOnChangePlugin_prod=__webpack_require__("./node_modules/@lexical/react/LexicalOnChangePlugin.prod.mjs"),LexicalEditorRefPlugin_prod=__webpack_require__("./node_modules/@lexical/react/LexicalEditorRefPlugin.prod.mjs"),LexicalRichText_prod=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.prod.mjs"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),FormHelperText=__webpack_require__("./node_modules/@mui/material/esm/FormHelperText/FormHelperText.js"),LexicalComposerContext_prod=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),Lexical_prod=__webpack_require__("./node_modules/lexical/Lexical.prod.mjs"),editorStyles=__webpack_require__("./src/components/GrepEditor/styles/editorStyles.ts"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),LexicalUtils_prod=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.prod.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function StyleWrapperPlugin(_ref){var showCharcount=_ref.showCharcount,helperText=_ref.helperText,readOnly=_ref.readOnly,classes=_ref.classes,label=_ref.label,children=_ref.children,autoFocus=_ref.autoFocus,toolbarAnchor=_ref.toolbarAnchor,hasCustomToolbar=_ref.hasCustomToolbar,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)(),editor=(0,slicedToArray.A)(_useLexicalComposerCo,1)[0],_useState=(0,react.useState)((function(){return editor.getRootElement()===document.activeElement})),_useState2=(0,slicedToArray.A)(_useState,2),hasFocus=_useState2[0],setFocused=_useState2[1],_useState3=(0,react.useState)(0),_useState4=(0,slicedToArray.A)(_useState3,2),charCount=_useState4[0],setCharCount=_useState4[1];(0,react.useEffect)((function(){return(0,LexicalUtils_prod.Sd)(editor.registerCommand(Lexical_prod.I2H,(function(){return setFocused(editor.getRootElement()===document.activeElement),!1}),Lexical_prod.jZM),editor.registerCommand(Lexical_prod.$7r,(function(){return setFocused(editor.getRootElement()===document.activeElement),!1}),Lexical_prod.jZM))}),[]);var styles=(0,editorStyles.f)({hasFocus,hasContent:charCount>0,readOnly,hasCustomToolbar}).classes;return(0,react.useEffect)((function(){autoFocus&&editor.focus((function(){var activeElement=document.activeElement,rootElement=editor.getRootElement();null===rootElement||null!==activeElement&&rootElement.contains(activeElement)||rootElement.focus({preventScroll:!0})}))}),[autoFocus]),(0,react.useEffect)((function(){editor.registerTextContentListener((function(content){var newCount=content.replaceAll("\n\n","\n").length;setCharCount((function(prevCount){return prevCount!==newCount?newCount:prevCount}))}))}),[]),(0,jsx_runtime.jsxs)(Box.A,{className:(0,clsx.A)(styles.root,null==classes?void 0:classes.root),sx:{marginTop:"2em"},onClick:function onClick(){return editor.focus()},ref:toolbarAnchor,children:[(0,jsx_runtime.jsx)("legend",{className:(0,clsx.A)(styles.legend,null==classes?void 0:classes.legend)}),label&&(0,jsx_runtime.jsx)("label",{className:(0,clsx.A)(styles.label,null==classes?void 0:classes.label),children:label}),(0,jsx_runtime.jsx)(Box.A,{className:(0,clsx.A)(styles.editor,null==classes?void 0:classes.editor),children}),(showCharcount||helperText)&&(0,jsx_runtime.jsxs)(Box.A,{margin:".5rem",children:[showCharcount&&(0,jsx_runtime.jsx)(FormHelperText.A,{className:styles.charcount,children:"Antall tegn: ".concat(charCount)}),helperText&&(0,jsx_runtime.jsx)(FormHelperText.A,{className:styles.helpertext,children:helperText})]})]})}const plugins_StyleWrapperPlugin=StyleWrapperPlugin;StyleWrapperPlugin.__docgenInfo={description:"",methods:[],displayName:"StyleWrapperPlugin",props:{showCharcount:{required:!1,tsType:{name:"boolean"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},classes:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"'root' | 'editor' | 'legend' | 'label'",elements:[{name:"literal",value:"'root'"},{name:"literal",value:"'editor'"},{name:"literal",value:"'legend'"},{name:"literal",value:"'label'"}]},{name:"string"}],raw:"Record<'root' | 'editor' | 'legend' | 'label', string>"}],raw:"Partial<Record<'root' | 'editor' | 'legend' | 'label', string>>"},description:""},label:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},toolbarAnchor:{required:!0,tsType:{name:"signature",type:"function",raw:"(_floatingAnchorElem: HTMLDivElement) => void",signature:{arguments:[{type:{name:"HTMLDivElement"},name:"_floatingAnchorElem"}],return:{name:"void"}}},description:""},hasCustomToolbar:{required:!1,tsType:{name:"boolean"},description:""}}};var htmlExportMap=new Map([[Lexical_prod.Ey8,function(editor,node){var textNode=node,element=textNode.createDOM(editor._config,editor);return element=function ApplyFormatting(element,formatting){if(Object.keys(formatting).every((function(key){return!1===formatting[key]})))return element;var text=element.innerText,el=document.createElement("span");el.innerText=text;var tagNames=Object.keys(formatting).filter((function(key){return formatting[key]})).map((function(key){return MAPPING[key]})),wrappedElement=tagNames.reduceRight((function(wrapped,tagName){var el=document.createElement(tagName);return el.appendChild(wrapped),el}),el);return el.childNodes.length>0&&el.childNodes.length<2?el.replaceWith(el.childNodes.item(0)):console.error("Error with Lexical custom textNode."),wrappedElement}(element,{italic:textNode.hasFormat("italic"),bold:textNode.hasFormat("bold")}),{element,after:function after(element){return"SPAN"===element.tagName&&0===element.attributes.length?null==element?void 0:element.textContent:element}}}],[Lexical_prod.fD3,function(editor,node){var element=node.createDOM(editor._config);return element.removeAttribute("dir"),{element}}],[LexicalRichText_prod.jL,function(editor,node){var element=node.createDOM(editor._config);return element.removeAttribute("dir"),{element}}]]),MAPPING={bold:"strong",italic:"em"};const DisablePastePlugin=function ModifyPastePlugin(_ref){var blockPasting=_ref.blockPasting,stripPastedStyles=_ref.stripPastedStyles,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)(),editor=(0,slicedToArray.A)(_useLexicalComposerCo,1)[0];return editor.registerCommand(Lexical_prod.waI,(function(e){if(blockPasting)return!0;if(stripPastedStyles){var _e$clipboardData,pastedText=null===(_e$clipboardData=e.clipboardData)||void 0===_e$clipboardData?void 0:_e$clipboardData.getData("Text").replaceAll("\n"," ");return editor.update((function(){var textNode=(0,Lexical_prod.sTu)(pastedText);(0,Lexical_prod.H2A)([textNode])})),!0}return!1}),Lexical_prod.jZM),null};const plugins_PreventNewlinesPlugin=function PreventNewlinesPlugin(_ref){var disableNewlines=_ref.disableNewlines,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)(),editor=(0,slicedToArray.A)(_useLexicalComposerCo,1)[0];return disableNewlines&&(0,LexicalUtils_prod.Sd)(editor.registerNodeTransform(Lexical_prod.haT,(function(rootNode){var _rootNode$getLastChil;rootNode.getChildrenSize()<=1||(null===(_rootNode$getLastChil=rootNode.getLastChild())||void 0===_rootNode$getLastChil||_rootNode$getLastChil.remove(),rootNode.selectEnd())})),editor.registerNodeTransform(Lexical_prod.GRK,(function(node){node.remove()}))),null};__webpack_require__("./src/components/GrepEditor/components/buttons/InlineButton.tsx");var FormatBold=__webpack_require__("./node_modules/@mui/icons-material/esm/FormatBold.js"),FormatItalic=__webpack_require__("./node_modules/@mui/icons-material/esm/FormatItalic.js"),ButtonType=function(ButtonType){return ButtonType.bold="bold",ButtonType.italic="italic",ButtonType}({}),createButton=function createButton(style){switch(style){case"bold":return{type:ButtonType[style],children:(0,jsx_runtime.jsx)(FormatBold.A,{fontSize:"small"})};case"italic":return{type:ButtonType[style],children:(0,jsx_runtime.jsx)(FormatItalic.A,{fontSize:"small"})}}},react_dom=__webpack_require__("./node_modules/react-dom/index.js");var LexicalSelection_prod=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.prod.mjs");var ToggleButtonGroup=__webpack_require__("./node_modules/@mui/material/esm/ToggleButtonGroup/ToggleButtonGroup.js"),ToggleButton=__webpack_require__("./node_modules/@mui/material/esm/ToggleButton/ToggleButton.js"),styles=__webpack_require__("./src/components/GrepEditor/styles/index.ts");function TextFormatFloatingToolbar(_ref){var editor=_ref.editor,anchorElem=_ref.anchorElem,isBold=_ref.isBold,isItalic=_ref.isItalic,buttons=_ref.buttons,classes=(0,styles.K)().classes,popupCharStylesEditorRef=(0,react.useRef)(null);function mouseMoveListener(e){if(null!=popupCharStylesEditorRef&&popupCharStylesEditorRef.current&&(1===e.buttons||3===e.buttons)&&"none"!==popupCharStylesEditorRef.current.style.pointerEvents){var x=e.clientX,y=e.clientY,elementUnderMouse=document.elementFromPoint(x,y);popupCharStylesEditorRef.current.contains(elementUnderMouse)||(popupCharStylesEditorRef.current.style.pointerEvents="none")}}function mouseUpListener(){null!=popupCharStylesEditorRef&&popupCharStylesEditorRef.current&&"auto"!==popupCharStylesEditorRef.current.style.pointerEvents&&(popupCharStylesEditorRef.current.style.pointerEvents="auto")}(0,react.useEffect)((function(){if(null!=popupCharStylesEditorRef&&popupCharStylesEditorRef.current)return document.addEventListener("mousemove",mouseMoveListener),document.addEventListener("mouseup",mouseUpListener),function(){document.removeEventListener("mousemove",mouseMoveListener),document.removeEventListener("mouseup",mouseUpListener)}}),[popupCharStylesEditorRef]);var updateTextFormatFloatingToolbar=(0,react.useCallback)((function(){var selection=(0,Lexical_prod.vJq)(),popupCharStylesEditorElem=popupCharStylesEditorRef.current,nativeSelection=window.getSelection();if(null!==popupCharStylesEditorElem){var rootElement=editor.getRootElement();if(null!==selection&&null!==nativeSelection&&!nativeSelection.isCollapsed&&null!==rootElement&&rootElement.contains(nativeSelection.anchorNode)){var rangeRect=function getDOMRangeRect(nativeSelection,rootElement){var rect,domRange=nativeSelection.getRangeAt(0);if(nativeSelection.anchorNode===rootElement){for(var inner=rootElement;null!=inner.firstElementChild;)inner=inner.firstElementChild;rect=inner.getBoundingClientRect()}else rect=domRange.getBoundingClientRect();return rect}(nativeSelection,rootElement);!function setFloatingElemPosition(targetRect,floatingElem,anchorElem){var verticalGap=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(null===targetRect)return floatingElem.style.opacity="0",void(floatingElem.style.transform="translate(-10000px, -10000px)");var floatingElemRect=floatingElem.getBoundingClientRect(),anchorElementRect=anchorElem.getBoundingClientRect(),top=targetRect.top-floatingElemRect.height-verticalGap,left=(targetRect.right+targetRect.left+floatingElemRect.width)/2;top-=anchorElementRect.top,left-=anchorElementRect.left+floatingElemRect.width,floatingElem.style.opacity="1",floatingElem.style.transform="translate(".concat(left,"px, ").concat(top,"px)")}(rangeRect,popupCharStylesEditorElem,anchorElem)}}}),[editor,anchorElem]);return(0,react.useEffect)((function(){var scrollerElem=anchorElem.parentElement,update=function update(){editor.getEditorState().read((function(){updateTextFormatFloatingToolbar()}))};return window.addEventListener("resize",update),scrollerElem&&scrollerElem.addEventListener("scroll",update),function(){window.removeEventListener("resize",update),scrollerElem&&scrollerElem.removeEventListener("scroll",update)}}),[editor,updateTextFormatFloatingToolbar,anchorElem]),(0,react.useEffect)((function(){return editor.getEditorState().read((function(){updateTextFormatFloatingToolbar()})),(0,LexicalUtils_prod.Sd)(editor.registerUpdateListener((function(_ref2){_ref2.editorState.read((function(){updateTextFormatFloatingToolbar()}))})),editor.registerCommand(Lexical_prod.MvL,(function(){return updateTextFormatFloatingToolbar(),!1}),Lexical_prod.AcJ))}),[editor,updateTextFormatFloatingToolbar]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:editor.isEditable()&&(0,jsx_runtime.jsx)(ToggleButtonGroup.A,{ref:popupCharStylesEditorRef,sx:{width:"auto",position:"absolute",top:0,left:0,zIndex:1},children:null==buttons?void 0:buttons.map((function(_ref3,key){var type=_ref3.type,children=_ref3.children;return(0,jsx_runtime.jsx)(ToggleButton.A,{classes:{root:classes.btn,selected:classes.btnSelected},value:type,selected:"italic"===type?isItalic:isBold,size:"small",onClick:function onClick(){editor.dispatchCommand(Lexical_prod.mB,type)},"aria-label":"format text as ".concat(type.toLowerCase),children},key)}))})})}function useFloatingTextFormatToolbar(editor,anchorElem,buttons,CustomToolbar){var _useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.A)(_useState,2),isText=_useState2[0],setIsText=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.A)(_useState3,2),isBold=_useState4[0],setIsBold=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.A)(_useState5,2),isItalic=_useState6[0],setIsItalic=_useState6[1],updatePopup=(0,react.useCallback)((function(){editor.getEditorState().read((function(){if(!editor.isComposing()){var selection=(0,Lexical_prod.vJq)(),nativeSelection=window.getSelection(),rootElement=editor.getRootElement();if(null===nativeSelection||(0,Lexical_prod.I2P)(selection)&&null!==rootElement&&rootElement.contains(nativeSelection.anchorNode)){if((0,Lexical_prod.I2P)(selection)){var node=function getSelectedNode(selection){var anchor=selection.anchor,focus=selection.focus,anchorNode=selection.anchor.getNode(),focusNode=selection.focus.getNode();return anchorNode===focusNode?anchorNode:selection.isBackward()?(0,LexicalSelection_prod.Nx)(focus)?anchorNode:focusNode:(0,LexicalSelection_prod.Nx)(anchor)?anchorNode:focusNode}(selection);setIsBold(selection.hasFormat("bold")),setIsItalic(selection.hasFormat("italic")),""!==selection.getTextContent()?setIsText((0,Lexical_prod.kFe)(node)||(0,Lexical_prod.bSg)(node)):setIsText(!1);var rawTextContent=selection.getTextContent().replace(/\n/g,"");selection.isCollapsed()||""!==rawTextContent||setIsText(!1)}}else setIsText(!1)}}))}),[editor]);return(0,react.useEffect)((function(){return document.addEventListener("selectionchange",updatePopup),function(){document.removeEventListener("selectionchange",updatePopup)}}),[updatePopup]),(0,react.useEffect)((function(){return(0,LexicalUtils_prod.Sd)(editor.registerUpdateListener((function(){updatePopup()})),editor.registerRootListener((function(){null===editor.getRootElement()&&setIsText(!1)})))}),[editor,updatePopup]),CustomToolbar?(0,react_dom.createPortal)((0,jsx_runtime.jsx)(Box.A,{sx:{position:"relative",top:"0.5em",left:"1em",zIndex:1},children:(0,jsx_runtime.jsx)(CustomToolbar,{buttons,editor,isSelected:[isBold,isItalic]})}),anchorElem):isText?(0,react_dom.createPortal)((0,jsx_runtime.jsx)(TextFormatFloatingToolbar,{editor,anchorElem,isBold,isItalic,buttons}),anchorElem):null}function FloatingTextFormatToolbarPlugin(_ref4){var anchorElem=_ref4.anchorElem,buttons=_ref4.buttons,CustomToolbar=_ref4.CustomToolbar,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)();return useFloatingTextFormatToolbar((0,slicedToArray.A)(_useLexicalComposerCo,1)[0],anchorElem,buttons,CustomToolbar)}var LexicalHtml_prod=__webpack_require__("./node_modules/@lexical/html/LexicalHtml.prod.mjs");function InsertDataPlugin(_ref){var html=_ref.html,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)(),editor=(0,slicedToArray.A)(_useLexicalComposerCo,1)[0],parser=new DOMParser;return(0,react.useEffect)((function(){if(html){var dom=parser.parseFromString(html,"text/html");editor.update((function(){var nodes=(0,LexicalHtml_prod.d)(editor,dom);(0,Lexical_prod.H2A)(nodes)}))}}),[]),null}function HeadingPlugin(_ref){var html=_ref.html,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)(),editor=(0,slicedToArray.A)(_useLexicalComposerCo,1)[0],tag=function getTagType(html){if(!html)return null;var tag=html.match(/^<h[0-6]>/);return tag&&tag[0].replace("<","").replace(">","")}(html);return(0,react.useEffect)((function(){tag?editor.registerNodeTransform(Lexical_prod.fD3,(function(node){node.replace((0,LexicalRichText_prod.fi)("".concat(tag)))})):editor.registerNodeTransform(LexicalRichText_prod.jL,(function(node){node.replace((0,Lexical_prod.lJ7)(),!0)}))}),[editor,html]),null}var allowBoldItalic=function allowBoldItalic(node){if(node.hasFormat("italic")&&node.hasFormat("bold")&&(node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline")))node.setFormat(0),node.toggleFormat("bold"),node.toggleFormat("italic");else{if(node.hasFormat("italic")&&node.hasFormat("bold"))return;node.hasFormat("bold")&&(node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))?node.setFormat("bold"):node.hasFormat("italic")&&(node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))?node.setFormat("italic"):(node.hasFormat("bold")||node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))&&node.setFormat(0)}};function TextNodeStylingPlugin(_ref){var allowedStyles=_ref.allowedStyles,_useLexicalComposerCo=(0,LexicalComposerContext_prod.DF)(),editor=(0,slicedToArray.A)(_useLexicalComposerCo,1)[0];return(0,react.useEffect)((function(){return editor.registerNodeTransform(Lexical_prod.Ey8,(function(node){void 0===allowedStyles||allowedStyles.includes(ButtonType.bold)&&allowedStyles.includes(ButtonType.italic)?allowBoldItalic(node):allowedStyles.includes(ButtonType.bold)?function allowBold(node){node.hasFormat("bold")&&(node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))?node.setFormat("bold"):(node.hasFormat("italic")||node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))&&node.setFormat(0)}(node):allowedStyles.includes(ButtonType.italic)?function allowItalic(node){node.hasFormat("italic")&&(node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))?node.setFormat("italic"):(node.hasFormat("bold")||node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))&&node.setFormat(0)}(node):function disallowAll(node){(node.hasFormat("bold")||node.hasFormat("italic")||node.hasFormat("code")||node.hasFormat("highlight")||node.hasFormat("strikethrough")||node.hasFormat("subscript")||node.hasFormat("superscript")||node.hasFormat("underline"))&&node.setFormat(0)}(node)}))}),[editor]),null}var theme={text:{bold:"GrepEditor-bold",italic:"GrepEditor-italic"}};function onError(error){console.error("GrepEditor: ",error)}function Editor(_ref){var html=_ref.html,label=_ref.label,classes=_ref.classes,autoFocus=_ref.autoFocus,helperText=_ref.helperText,showCharCount=_ref.showCharCount,allowedStyles=_ref.allowedStyles,blockPasting=_ref.blockPasting,disableNewlines=_ref.disableNewlines,onContentChange=_ref.onContentChange,editorRef=_ref.editorRef,stripPastedStyles=_ref.stripPastedStyles,readOnly=_ref.readOnly,Toolbar=_ref.Toolbar,initialConfig={namespace:"GrepEditor",theme,editable:!readOnly,onError,nodes:[LexicalRichText_prod.jL],html:{export:htmlExportMap}},_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.A)(_useState,2),floatingAnchorElem=_useState2[0],setFloatingAnchorElem=_useState2[1];editorRef||(editorRef=(0,react.useRef)(null));var canStyle=void 0===allowedStyles||allowedStyles.length>0,buttons=allowedStyles?allowedStyles.map(createButton):function createDefaultButtons(){return[createButton("bold"),createButton("italic")]}();return(0,jsx_runtime.jsxs)(LexicalComposer_prod.n,{initialConfig,children:[(0,jsx_runtime.jsx)(LexicalEditorRefPlugin_prod.G,{editorRef}),(0,jsx_runtime.jsxs)(plugins_StyleWrapperPlugin,{helperText,showCharcount:showCharCount,readOnly,classes,label,autoFocus,toolbarAnchor:function onRef(_floatingAnchorElem){null!==_floatingAnchorElem&&setFloatingAnchorElem(_floatingAnchorElem)},hasCustomToolbar:void 0!==Toolbar,children:[canStyle&&floatingAnchorElem&&(0,jsx_runtime.jsx)(FloatingTextFormatToolbarPlugin,{anchorElem:floatingAnchorElem,buttons,CustomToolbar:Toolbar}),(0,jsx_runtime.jsx)(LexicalRichTextPlugin_prod.$,{contentEditable:(0,jsx_runtime.jsx)(LexicalContentEditable_prod.a,{spellCheck:!1,className:"GrepEditor",style:{outline:"none"}}),placeholder:null,ErrorBoundary:LexicalErrorBoundary_prod.R}),(0,jsx_runtime.jsx)(LexicalHistoryPlugin_prod.G,{}),(0,jsx_runtime.jsx)(LexicalOnChangePlugin_prod.D,{onChange:onContentChange}),(0,jsx_runtime.jsx)(InsertDataPlugin,{html}),(0,jsx_runtime.jsx)(HeadingPlugin,{html}),(0,jsx_runtime.jsx)(DisablePastePlugin,{blockPasting,stripPastedStyles}),(0,jsx_runtime.jsx)(plugins_PreventNewlinesPlugin,{disableNewlines}),(0,jsx_runtime.jsx)(TextNodeStylingPlugin,{allowedStyles})]})]})}Editor.__docgenInfo={description:"",methods:[],displayName:"Editor",props:{html:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},showCharCount:{required:!1,tsType:{name:"boolean"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},buttons:{required:!1,tsType:{name:"Array",elements:[{name:"Button"}],raw:"Array<Button>"},description:""},disableNewlines:{required:!1,tsType:{name:"boolean"},description:""},stripPastedStyles:{required:!1,tsType:{name:"boolean"},description:""},blockPasting:{required:!1,tsType:{name:"boolean"},description:""},editorRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"LexicalEditor | null | undefined",elements:[{name:"LexicalEditor"},{name:"null"},{name:"undefined"}]}],raw:"RefObject<LexicalEditor | null | undefined>"},description:""},allowedStyles:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"Array<Style>"},description:"Undefined: allow all styles.\nEmpty array: disable all styles.\nNot empty array: allow only specified styles."},Toolbar:{required:!1,tsType:{name:"ReactFunctionComponent",raw:"React.FunctionComponent<ToolbarProperties>",elements:[{name:"ToolbarProperties"}]},description:""},classes:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"'root' | 'editor' | 'legend' | 'label'",elements:[{name:"literal",value:"'root'"},{name:"literal",value:"'editor'"},{name:"literal",value:"'legend'"},{name:"literal",value:"'label'"}]},{name:"string"}],raw:"Record<'root' | 'editor' | 'legend' | 'label', string>"}],raw:"Partial<Record<'root' | 'editor' | 'legend' | 'label', string>>"},description:""},onContentChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  editorState: EditorState,\n  editor: LexicalEditor,\n  tags: Set<string>,\n) => void",signature:{arguments:[{type:{name:"EditorState"},name:"editorState"},{type:{name:"LexicalEditor"},name:"editor"},{type:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},name:"tags"}],return:{name:"void"}}},description:""}}};var GrepEditor=function GrepEditor(_ref){var props=Object.assign({},((0,objectDestructuringEmpty.A)(_ref),_ref));return(0,jsx_runtime.jsx)(Editor,(0,objectSpread2.A)({},props))};const components_GrepEditor=GrepEditor;GrepEditor.__docgenInfo={description:"",methods:[],displayName:"GrepEditor",props:{html:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},showCharCount:{required:!1,tsType:{name:"boolean"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},buttons:{required:!1,tsType:{name:"Array",elements:[{name:"Button"}],raw:"Array<Button>"},description:""},disableNewlines:{required:!1,tsType:{name:"boolean"},description:""},stripPastedStyles:{required:!1,tsType:{name:"boolean"},description:""},blockPasting:{required:!1,tsType:{name:"boolean"},description:""},editorRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"LexicalEditor | null | undefined",elements:[{name:"LexicalEditor"},{name:"null"},{name:"undefined"}]}],raw:"RefObject<LexicalEditor | null | undefined>"},description:""},allowedStyles:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"Array<Style>"},description:"Undefined: allow all styles.\nEmpty array: disable all styles.\nNot empty array: allow only specified styles."},Toolbar:{required:!1,tsType:{name:"ReactFunctionComponent",raw:"React.FunctionComponent<ToolbarProperties>",elements:[{name:"ToolbarProperties"}]},description:""},classes:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"'root' | 'editor' | 'legend' | 'label'",elements:[{name:"literal",value:"'root'"},{name:"literal",value:"'editor'"},{name:"literal",value:"'legend'"},{name:"literal",value:"'label'"}]},{name:"string"}],raw:"Record<'root' | 'editor' | 'legend' | 'label', string>"}],raw:"Partial<Record<'root' | 'editor' | 'legend' | 'label', string>>"},description:""},onContentChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  editorState: EditorState,\n  editor: LexicalEditor,\n  tags: Set<string>,\n) => void",signature:{arguments:[{type:{name:"EditorState"},name:"editorState"},{type:{name:"LexicalEditor"},name:"editor"},{type:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},name:"tags"}],return:{name:"void"}}},description:""}}}},"./src/components/GrepEditor/styles/editorStyles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>useEditorStyles});var _styling__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styling/index.ts"),useEditorStyles=(0,_styling__WEBPACK_IMPORTED_MODULE_0__.n9)()((function(theme,_ref){var hasFocus=_ref.hasFocus,hasContent=_ref.hasContent,readOnly=_ref.readOnly;return{root:{position:"relative",display:"inline-flex",flexDirection:_ref.hasCustomToolbar?"column-reverse":"column",minWidth:"100%"},legend:{position:"absolute",top:-5,left:0,right:0,bottom:0,lineHeight:"11px",zIndex:hasFocus?0:1,paddingLeft:10,borderStyle:"solid",borderRadius:theme.shape.borderRadius,borderWidth:hasFocus?2:1,borderColor:hasFocus?theme.palette.primary.main:(0,_styling__WEBPACK_IMPORTED_MODULE_0__.qh)("#000",.23),"&:hover":{borderColor:hasFocus?theme.palette.primary.main:theme.palette.text.primary},transition:theme.transitions.create(["border-color"],{duration:theme.transitions.duration.shorter,easing:theme.transitions.easing.easeOut})},editor:{padding:".8rem 1rem",position:"relative",zIndex:hasFocus||readOnly?1:0,"& .unstyled":{margin:".5rem 0"}},label:{position:"absolute",top:0,left:0,zIndex:1,transform:hasFocus||hasContent?"translate(6px, -14px) scale(0.75)":"translate(6px, 12px) scale(1)",transformOrigin:"top left",transition:theme.transitions.create(["color","transform"],{duration:theme.transitions.duration.shorter,easing:theme.transitions.easing.easeOut}),color:hasFocus?theme.palette.primary["light"===theme.palette.mode?"dark":"light"]:theme.palette.text.secondary,fontSize:"1.1428571428571428rem",backgroundColor:"white",padding:"2px 10px"},helpertext:{margin:0,opacity:hasFocus?1:0,transition:theme.transitions.create(["opacity"],{duration:theme.transitions.duration.shorter,easing:theme.transitions.easing.easeOut}),fontSize:"small",backgroundColor:"white",padding:"2px 10px"},charcount:{margin:0,transition:theme.transitions.create(["opacity"],{duration:theme.transitions.duration.shorter,easing:theme.transitions.easing.easeOut}),fontSize:"small",backgroundColor:"white",padding:"2px 10px"}}}))},"./src/components/GrepEditor/styles/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>useButtonStyles});var useButtonStyles=(0,__webpack_require__("./src/styling/index.ts").n9)()({btn:{backgroundColor:"white","&:hover":{backgroundColor:"#F2F2F2"}},btnSelected:{backgroundColor:"#E0E0E0 !important","&:hover":{backgroundColor:"#D9D9D9 !important"}}});__webpack_require__("./src/components/GrepEditor/styles/editorStyles.ts")}}]);